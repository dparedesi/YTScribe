---
video_id: 50hKzkjRErE
video_url: https://www.youtube.com/watch?v=50hKzkjRErE
is_generated: False
is_translatable: True
---

Alright, I've got a question. What comes to mind when you think of an airport? I'll let you think about this one. Queues People dragging your suitcase, your heavy suitcase along rushing for your flight. Scenes like this Or scenes like this. Or if you're really unlucky. Scenes like this. Yeah, we've all been there. Wouldn't it be nice if your airport experience could be a little more like. This Well thankfully, with services like Priority Pass, which offers airport lounges and access to those airport lounges across the globe, it can be. But because this is such a superior travel experience, Priority Pass has gained millions of customers enjoying its lounges. However, this comes with its challenges. Right, there was a point where their web platform was not scaling to meet the needs of those customers. It was not globally performing for its international traveler base. Well, that is why we're here today. Alright, we're here to tell you the inside story of how Priority Class modernized their web platform to scale to millions of global users using AWS Amplify. I'm Fred, I'm an account manager here at AWS. I'm here with Richard, who leads engineering for Collinson Group, who manage the Priority Pass brand, and we're really excited to tell you this story today. So let's get started. And before we dive into the priority pass story, I do think it's worth just a level set on AWS Amplify, right, for those who aren't as familiar with the service. What is AWS Amplify? Simply put, we built Amplify to make it easier for developers to build full stack web applications. What does that actually mean? Amplify abstracts away a lot of the complexity of building web and mobile applications, deploying them. And with Amplify you can develop, you can ship, you can scale your application with just a few lines of code. Let's look at some of the features of Amplify, so you can take uh an app front end that you've built and you can deploy it with Git-based workflows that support pretty much any server side framework. And once you've deployed that app, it's served globally with really low latency via Amazon Cloudfront. And because Amplify gives you full TypeScript capabilities, you can bring the breadth of AWS services to a front-end developer experience that's already really familiar. And you can author app requirements, things like data models, like business logic, like author rules, all in TypeScript. You can spin up new app environments by connecting branches from Git. So here for example, we've got a main branch, we've got a deb branch, I'm very familiar, but with Amplify we've connected those into a production environment and a staging environment, each with its own. Isolated front end code and backend resources, which makes it really easy to iterate, test out new functionality and keep those environments separated, and you get fully managed CICD pipelines out of the box. So it doesn't matter if you wanna bring backend features like a database, whether it's NoSQL or an SQL through Dynamo DB or RDS. Whether you want fully managed APIs, functions, ML services, or storage, real-time functionality. Right, you can tap into amplify libraries that help you build those backend resources really easily. If you want your own custom resources, then you can use AWS CDK which gives you access to 175 or more services. If you haven't used AWS CDK, the cloud development kit, really, really recommend it, right, a great way to define your applications and infrastructure is code. And we talked a little bit earlier about framework, so it doesn't matter whether you're building a server side rendered app through Nets JS or Nux or Svelt, or you've got a single page web application through Angular or React or View or JavaScript, or you might be building mobile applications, right, native ones in Android or SWIFT, you might be building cross-platform ones in in Flutter or React Native. Amplify supports all of these frameworks and more, this is not an exhaustive list. So look, hopefully that's a, a helpful overview of how Amplify works. It's one thing to talk about it theoretically. It's much more helpful to actually understand how you go and build and how a customer's done that, so for that I'll hand over to Richard. Thanks, Fred. Um, So one of the products that the Carlinson, the company I'm from builds is and the one we're most famous for is Priority Pass. Now some of you might actually have this service already, so you have a particular AmEx card or a Chase card or another high value credit card, it's likely that it comes with a number of benefits, and uh one of those benefits is is often airport lounge access. And chances are if you've got that, it's priority pass cos we're the market leader in pretty much every region. Um, more generally, priority pass gets you into an airport lounge, so if you fly a lot and you, uh, don't get into a business or first class lounge from your airline, priority pass gives you an alternative. Now systematically, um, our traffic is extremely bursty cos it mirrors global flight patterns across multiple time zones in, in every continent. So we see users every second. Um, unfortunately that does mean that we can't optimize traffic around a single region. Um, and as a result, we kind of, we rely on a CDN first architecture that gives you consistent performance characteristics, uh, everywhere. Uh, and I mention it and cos that's kind of sets the context for why we've leveraged Amplify, um. Now we actually support 100s millions and millions of members and we get historically more than 100 million people visiting our website every year and then several 100 million more using our app, so it's pretty high traffic, and our mobile app and our website is the primary way our customers interact with us. Um, on there, users can do things like generating a digital membership card, which is basically a QR code that you scan to get into the airport lounge. You can pre-book lounge access in advance. You can search for services in a location that you're currently at. You can make payments. There's like a personal profile section as well, and, and customers basically register and activate for the service through our website. Now, from a traffic perspective, um, site isn't actually just one workload, so whether it's search, pre-booking, profile pages, digital car display, they all generate, uh, different patterns, and some of them are anonymous and CDN friendly, others require fairly extensive API calls and, and dynamic rendering. So our hosting layer needs to support both static and server side rendering paths without becoming operationally er burdensome or too heavy. Now Over the last year and a half or so, we've been looking at our platform more generally and have been working on a fairly substantial rearchitecture, covering everything end to end, but our web technology was, was frankly our most dated. So we use this, uh, legacy, legacy CMS called Sitecore with a lot of uh custom integration into our internal backend APIs and services. Uh, our hosting was largely compute driven, just standard EC2. And it was expensive, uh, deployments were slow and pretty brittle, um, when we get traffic peaks, uh, that would require a degree of like manual scaling and tuning, even if it's just, you know, adding and removing things to a load balance pool, and that's just not great for a platform with a large, high volume uh global consumer base. Um, our revised wider rearchitecture is node based and therefore we wanted to align our, our web apps for that as well. Um, we also wanted to drastically simplify our hosting, uh, and just make that a little more sca scalable, and then finally we wanted to replace our, so our legacy conventional CMS with a headless option. Um, we had 4 like business requirements as well from that which was like ship quickly, watch the costs, ideally reduce them. It has to be fast and stable and less infrastructure to manage. Um We, uh, kind of looked at a couple of options and we ended up with two front runners which was Amplify and Vesel. Now we actually already had apps that were Versal based and we have others that are nextGS based, um, so we thought both were viable. And we both offered enterprise level security, which is what we were looking for as well, um, we kind of thought Amplify might be more cost efficient, and we weren't sure, but it definitely aligned better with the rest of our hosting, which is we're exclusively AWS. Um, to start with, we did what everyone usually does is start with a, with a pock, um, just to make sure that either option was viable, and what we did was we created a proof of concept using a service called Tokenex, which is our card tokenization provider. So we actually, um, we store cards on file for customers, and the reason being is that if you go to an airport lounge and the number of say, Um, access or entitlements that your, your credit card gives you, you run out, well, and you still want to get in, we can just charge your card directly, and that would be much cheaper than if you just pay the lounge to get in, but we don't want to store just actual brawl card details, so we tokenize them and that's the service that we used, um, so. This PC was effectively just making that tokenization process end to end, embedding it into our website, uh, and hosting it and seeing if that, if that would work, which we did, we did it on both Amplify and Vel, um, and so we would consider the, I guess the POC successful, and the only thing we found the difference was, was that Amplify was just cheaper, um, quite a lot, it was about 900% cheaper. Um, next we moved on to a trial. So with the technology proven, we decided to to mitigate a couple of lower traffic web apps, um, so we rebuilt two services in NextJS using Contentful as as the head of CMS option and hosted in Amplify. These were like a support. This page with like FEQs and then our primary our primary parent company's corporate website as well, relatively low traffic. Once that was done we thought yeah this was successful, it's safe enough to move our priorityPass.com, which is like our our high value IP over to it. Um, Throughout the process, we knew that we were undertaking um uh a bit of tech that we were kind of unfamiliar with, and we thought the safest way of doing it was engaging directly with AWS. So um we partnered with our, like our account solution architect who actually then put us in touch with the amplified product development team themselves, which was awesome, um, and it was actually incredibly useful because we did run into some issues like cash uh invalidation. Didn't really behave in the server side rendering stuff pages as we expected it to. At the time, there was no WAF integration with Amplify, but actually working with the team, they actually were able to put that in for us, which was, which was amazing, and there were some like weird quirks with DNS redirect, but. By and large it was, it was, um, the most useful part was, uh, this was effectively free consultancy, right, we don't, you don't pay for this, this is just available if you're an AWS customer, and it massively reduced our go to market time cos these are not issues that we we'd have been able to solve by ourselves. Now from an architecture perspective there are sort of three principles. One, we used a mono repo and we used NX for tooling, like apps live under like a Slash app, apps directory, shared libraries under slash libs. Um, we have a design system which is a storybook with visual regression, and then we just use version NX tags to avoid any accidental breaking changes, and then each app is like a separate, separate amplify app slash branch pointing to like a subfolder with its own build spec. Um, although it was a mono repo, we're still actually able to deploy individual amplify apps, uh, by themselves without having to deploy everything, so which is useful. From a continuous delivery deployment perspective, um. Everything in Amplify, at least for us, is managed in terraform, so that includes like branches, environment variables, um, and then we use GitHub actions across the board for like linting, security checks, running a test pack, um, and then probably the most useful thing from a developer experience is getting ephemeral environments out of the box. So Amplify creates like its own unique isolated year-round environment that mirrors production for each branch, and it generates that ephemeral environment. About 6 minutes from creating the branch, which is, which is awesome, and like getting ephemeral environments with next to no infrastructure, next to no code is amazing, um, and it's particularly useful for like testing changes before you actually want to merge it in an environment that mirrors production. Um, this is the architecture, and it's fairly simple, right, so a number of NGS apps, some shared libraries, some lambdas, piping that through to our, uh, um, to GitHub actions where we run like code profilers, we use SonarCube, and then just leveraging the Amplify CLI, you create a project and it's got a number of Amplify, uh, apps under that, each with their own uh domain name, each with their own firewall. And then we can propagate through to an internal or external API calls that we use, whether it's Contentful, Salesforce or anything else that we've got, and then Data Dog for for monitoring. So it's fairly simple and the only main point I would, I would sort of put here is that the, the amount of config to get started is minimal, right, it's very small and you end up with a fairly, uh, simple web architecture with very little work. From a deployment standpoint, like I said, everything is um fully automated for us using GitHub actions, which is triggered on merges, so we automatically push changes once something's merged into main and we run our internal quality gates before pushing to amplify, and at that point Amplify's own internal CICD kicks in, handles the build, deploy versioning. Um, Amplified does actually have some backend capability as well, um, so it can deploy our back-end services like Lambdas, API gateways, Dynamo DBs, etc. through the same pipeline. We didn't, we didn't use that, we kept it front end only, because the rest of our backend infrastructure is all in a completely separate environment. Um, under the hood. Um, Amplify sites are just served through Cloudfront, and then there's like optional server side rendering with lambdas behind the scenes, but that's just all abstracted away. You don't really need to worry about it. But there are some drawbacks. You do get reduced observability, so you don't get access to the same level of raw raw cloud. Front logs or lambda logs that you would get, which does make like troubleshooting a pain if you need to do that, and there's some features that are just not there yet, so like ISR isn't supported, so there are some trade-offs and and especially if you're using like you know a framework like NextGS and you expect to get a static regeneration of content, something to be aware of. Um, looking back on kind of what we learned, first point was collaborating directly with AWS, definitely useful, especially because it doesn't cost anything, so it's worth kind of taking advantage of that. Um, and like I said before, it it did reduce our, uh, our go to market time fairly substantially. The main thing is cost savings, so our hosting shrunk from $180,000 a year to $20,000 a year for moving off of legacy EC2 servers and legacy database server and. The licenses that that went with that moving to to Amplify and then ahead of the CMS option, so the costs plummeted as a result, which uh which was really good. Um, our build time went down quite a lot and our release cadence went up substantially as well. So we actually ship our web apps now, um, much faster than any other bit of our platform, so we have hundreds of hundreds of deployments a month in comparison to once or twice a week before. Um, some of this is admittedly down to the fact that we've changed programming language, right, running it in TypeScript versus, uh, proprietary CMS will have some benefits as well, but the hosting will have made a big difference too, and our platform stability has increased substantially, so we're not dealing with traffic spikes now that would have caused an outage before. In fact, um, we haven't seen any traffic related outages since moving, and we have had to do zero manual tuning. And thanks to Annie Lowood as well since migrating as well, so from a just a general experience point of view, substantially improved for the for the like the quality of life of the engineers that support it. And, finally, Amplify does actually have its own like JavaScript framework for greater integration, so it provides tooling for like authentication. Um, some UI components, some storage, some analytics, uh, it just essentially makes it easier to build amplify apps. We didn't use that at all. Um, we kind of wanted to stay as framework as agnostic as possible, um, and we didn't want to be too coupled to Amplify's fairly opinionated view of, um, how projects should be structured. In hindsight we probably could have done, right, if we were to start this again, we're probably looking at a rewrite anyway, in which case we probably should have just leveraged any APIs, um, and, and frameworks that would have sped up the initial migration in the first place. But really to conclude, Build time went down, developer experience improved massively, and costs plummeted substantially as well, so from our point of view, the project was a was a monumental success and now handing back to Fred. Thank you Richard, appreciate it, thank you so much for sharing the story all the way from the UK with our reinvent guests. Um, so look, next time you think of an airport. And the queues and the people and the dragging of your luggage for miles, and the heavy lifting, remember that there is a better way. Just like when you're building and hosting your web and mobile apps, you can reduce all that heavy lifting. By building with AWS Amplify, right, and that gives you time to focus on what is really important, building new features, delighting your customers, writing great code. It's been an absolute pleasure to talk to you today about this topic. Really appreciate you all attending. I know you've already been asked this, probably at least 10 times, and you will be asked another 700 times before the end of the week. Please, please, please do fill out the survey. It'll take you 30 seconds. Get out your phones now. I'm watching all of you, right? The reason is, if you don't fill out the survey, we have no idea if you enjoyed this talk and what we can do to improve it next time and make a good use of your time. Thank you all so much, enjoy the rest of Ran then.