---
video_id: HJrs75qoC8k
video_url: https://www.youtube.com/watch?v=HJrs75qoC8k
is_generated: False
is_translatable: True
summary: "This session, \"Architecture lessons: Three failures and how to prevent them (DEV341),\" presented by Bruno Marangoni from DXC Technology, dissects three real-world AWS architecture failures from Latin American customers and potential prevention strategies. The first case involves a Brazilian e-commerce company plagued by manual scaling and high latency due to poor Availability Zone (AZ) distribution and lack of caching; the solution involved implementing Auto Scaling groups, balancing instances across AZs, consolidation of load balancers, and adding caching layers (for images and DB), improving latency by ~80ms. The second case describes a large bank where a lack of communication between platform and security teams led to an accidental, irreversible EKS cluster upgrade that took down a critical application for 6 hours (costing ~$1.2 million BRL), highlighting that \"architecture fails when the process fails.\" The third case focuses on a company with lack of financial governance in their migration journey, running non-production workloads on production-grade instances without scheduling, where implementing right-sizing and shutdown policies saved ~720k BRL annually."
keywords: AWS Architecture, Failures, Resilience, Operational Excellence, EKS, Cost Optimization, Auto Scaling, Caching, E-commerce, Governance, Latin America
---

Hey. Nice to meet you guys. I huge pleasure to be here, and I, I'm gonna present you architecture lessons from customers in Latin, uh, that I do, they are doing. They, they failure, uh, but we help them to prevent that, and I will gonna teach you how you guys can be do the same, right? So I'm Bruno Marangoni. I'm Latin senior solutions architect at DXC. Uh, yeah, so our agenda is just an introduction, uh, about this, uh, architecture is perspective. Failure, uh, number one, we are going to talk, talk about resilience, security, operational excellence, and mucha couch and cultural efficiency. And at the end, I'm gonna do like final thoughts, right? So. We owe attackers, we are failures, and also real lessons. It's all about. Uh, best practice, right? So we learn about the errors or the issues from each other and we can apply in your, uh, perspective or scenario. So every architecture looks perfect and it meets the reality, right? So we saw a couple of days ago, uh, Amazon has a problem, and we all know the results of the problem. So most, some clients, they got stuck on the, the, the infrastructure because they They try to prevent, but they don't test it, right? So it's the problem, the real problem of uh perfect architecture is when we draw. Implement, but we don't uh actually that's the, the problem. So, uh, my first failure lesson is about resilience. Uh, so I have like a customer, I this customer is actually Brazilian, uh, customer. So they have like a, they are uh e-commercey fulfillment. And they, they host two of our major mobile companies to sell like cell phones, so they, they sell iPhones, accessories, Motorola, and so on, and They, they got like a 30 calls per day in their website. So I, I'm, I'm just saying here is a mix of both uh customers and this is one of the problem. They don't isolate the customers, they just put them into the same architectory is uh uh actually a contract problem, right? So. At the end, they are, they, their customers are just sharing the same infrastructure. Uh, it's just a basic 3-tier application, uh, so load balancer, um, Webian, APlayer, and database. We all learned uh in AWS. This is the, the most perfect, uh, web 33 tier application. So load balancer, uh, we just, uh, balance the uh EC2 instances CSCSi whatever, uh, doing, uh, auto skating and also. We do the same for our database RDS or even a database over in situ, right, uh, balance, balance over the available chizon, but this is the real architecture for this customer so they got manual scale. And we are talking about uh e-commerce, right? So, uh, they have like peak seasonal, uh, marching, uh, uh, campaign seasonal like Black Friday, so. With, uh, on a web application, doing manual scale is the worst part, right? So, As you can see here, let me point, uh, yes, if you count, is right. They just, uh, hold our instance, like 5 instances, uh, on one availability zone and just 1 in another availability zone, and I asked them why there is a reason for that. And they just say, no, uh, we just add this in this way. Uh, here also they, they have like the. The primary, uh, database, uh, in a hardwares availability. So from the most, uh, where the most, uh, instances is true. I hosted, so. We know AWSC has a region component, and in the region we have availability zones and AWSC say, OK, just it's a region you can add in whatever availability zone, you want, but AZ is just a data center, right? And in this case, uh, here I got like. Almost 20 2 milliseconds of time in latency, uh, when I go to this instance and call the RGS database. So I'm adding just a a latense for the communication between the, the web application and the database in this scenario. So when we, we arrange that. I put the, the primary uh RGS here. I just uh decrease the time of the, the calls to the database. And also, we are talking about e-commerce, right? There's no caching. It's a trash here. And also, as they do like a manual scale, they even don't have like easy to gold image like. Just to build up a new instance when they need it like for seasonal marching or Black Friday or whatever, so they, they have to just ask the support and create a new instance, uh, deploy, install every uh dependencies in the, in the application to add in front of the load balancer, so. Too much manual, uh, steps, right? So what we have done for this customer. First, Balance the instance, right? So if you are need, we are going to need more availability for an e-commerce is a reason to just distribute the, the instances between easy or even. If the availability zone is not a trade-off for this customer, we have, we, we can just edge everything inside the one availability zone. But we are talking about e-commerce. If the AZ one just go down. The application will go down too. Also, uh, we create an image, easy to golden image to create out skating group. So we, we, we have done like the template for the ECU. We fill out the penis and create the, the way that the auto skating works. Uh, the RGS. As we just spread this situation as you out skating, there's no reason, no, no, no, no reason to just, uh, move, uh, there just like the prim primary to, to here. One thing I didn't know for you guys. An e-commerce of mobile has too much photos, right? Because they, they are selling mobile. So that photo for iPhone, photos for whatever cell phone they are going to sell. Yeah, they, they have here S SC3 instance to host the, the images. But I add here the caching stra strategy. So the first one is for the uh web arch, the the front change, right, to cache the images for the photos. So I add uh more uh performance to answer the, the calls for the, the customers because they don't need to download uh the image again just uh we are adding cashier and also. On the developing parts. They, they, they in this before this, they are doing like. Every time you want cus customer go to the website, they call uh the database and that database uh answer the the call with the images. So every time one customer go they they download everything we add here caching for the database as well. So at the end of this uh architecture. We just decrease. 80 milliseconds of uh when when one customer just go to the website e-commerce so we got too much in performance for this uh this this client. Yeah, we, we actually, uh, do very good data, uh, in Brazil or. It's good to sell for our customers or improvement, right? So, uh, the lesson one, the modifications we have done, go the image bootstrap, all the scaling, uh, we balance the, the web application between ACs. We have consolidate load bouncers. I didn't tell for, for you guys, but they have, yes, they have it like for 3000 cows, uh, on average per day. They have, uh, they have created, uh, like 6 load balancers for development, Q&A project, uh, for other parts of the website like for Adimin, and I don't know, I, I, I couldn't remember the last one, but they create 6 load bouncers for each uh kind of part of the website. And we consolidate, we actually decrease the amount of money they are, they were paying. And cache for the database layer and web layer. So after the modifications, yeah, the e-commercey uh gets a more peak uh of uh customers and also In this, this discuss where we, we were going to uh Do a Black Friday. Uh, if you guys remember, the iPhone 14 is 34 years ago, yeah, uh, when the, the Apple just released the iPhone in Brazil. Uh, we are talking about the most, uh, the both, uh, two companies in Brazil, they sell iPhone and other phones, and their website went down. Like, uh, they lost, they lose money and also, uh, the, the mobile company. Uh Lose money as well. So in this uh lesson, availability is an architecture decision, not a checkbox. You have to do your trade-offs. We have done this trade-off with them when uh the website went down on Black Friday, the, the engineer team just say. OK, let's go and do, uh, let's spread the application between the 6 AZ on North Virginia. Why? There's a reason for that. Is availability OK, we can get more availability, but there's no reason because the. Average of cows per user, like on a, on a week, on a day, 3, 2000 cows is too, is small, right? So there's no reason for that. And we approve all that and After, uh, we changed everything and they, they got like satisfied, right? Cool. Uh, 2nd lesson, failure lesson 2. This is security plus operational excellence. Uh, for this customer. They, they got like an ETS. Uh, an ETSN plus security hub. So the cluster was Enterprise Bank with. The most critical application is running on that. Uh, this application sir uh is a customer service platform. So ETS most uh mission critical workload and the security hubby was enabled in the whole account uh following the uh best practice and also the foundational security best practice. The alerts were generated, uh, but some of them was ignored and the version of date for ATS was, uh, pop-popping. Every month, every day, and they just, uh, we're doing postponed, uh, this pop-up. So, uh, the problem is the ATS and. An update. there's someone here got like problem with the ATS that you have to update, right? Yeah, it's, it's, it's dangerous. It's dangerous. So just uh to let you know, Guardetti has uh some features very good with the ETS. You have to, to enable one guard duty. And also enabling on your ETS uh cluster just here I just print the images from the, from the services, but the point is here. So the security hub alerts was alerting ETS version up to date support is soon, right? So, uh, The whole uh TICPM was running very good. They are, they were alerting you have, you should up in age as quickly as possible, but they are just ignoring and suppressed. Yeah, the they Coming. So We We work with uh teams to have like a death set cops cycle to broken the silos, but sometimes. The communication didn't work, right? So. The guys from the platform team was suppressing and they didn't talk with the security team. And one day the security changes is enough. Every time this alert is, is, is getting for us, let's apply the upgrade for ETS. And what's happened, yeah, this is the documentation for ETS on the AWS documentation. On Copic grade duck cluster. You can't downgrade, right? And even worse, if you upgrade and you, you, you are, you were in the version, uh, there is not super more on the console, you cannot go back and that that's the problem here, so. AWSC didn't say on the documentation, but sometimes you can call your 10, your solutions are that, your partner and say, man. My application is down. I'm losing money. I have to go back. Yeah, they, they, they could uh help you in this case it was done. So uh we call the AWS as a partner and help this customer uh downgrade the cluster again and put and bring down, bring up the cluster and the application uh come back. So, here, the problem is the cluster was up, the application was done, right? Some, uh, Ways to could we the customer have been avoided. Just look for EASC pipeline validation for updates and also governance and architecture. I'm not going through for each one, but here, the point is. Everything was working. They have pretty good, uh. Governance, they have pretty good, uh, process, but the problem here was. Oh, wasn't the OPH. The problem was the delay from the platform team with the secure team talk to each other and plan a day to do the upper grade, upgrade, right? So, uh, the archi architecture failed when the process failed and the process, the silo. Uh, communication was broken in this case and just a number, uh, this customer was down for six hours and was $1.2 million of reals is almost, uh, $2050 I think and also the point here is not the $0.2 million is the SLEA agreement. Because that was a bank, right? It was a huge bank. OK, cool. Lesson 3 much accounting coach efficient. Uh, here is, is pretty simple. Uh, the company just, uh, This has like a a migration, a journey to cloud. They migrate 7 70% of workloads were not in production, so D and QA. Every time, every workload's running on the main instance, even ECO EIS ECS, no right sizing, no operation window, no shut you down policy. Uh, they, uh, tragic dive as a production, so everything was, was on the age and also like for, for supporting the dive environment, she was the same SLA, uh, at the same cost at production. So what's going to happen, lack of finance governance, fear of shutdown, without clear policy, lack of text and communication. If you know wants the cost, the cost, everyone wants the wage. The point here is. Numbers, right, so we save it for this customers 60,000 reals per month, almost to $1100 and the annual saving was that was pretty good, right? was pretty good. So Claudia said that she should be true, right? It's pretty, it's pretty important you will know that the cost should go. And as the the Claudia. Final thoughts. I would like you guys just take a picture because it's important, it is important for you for, uh, understand everything, the key, key, key takeaways that we have done, we have talked here. Awesome. You can find me on Linkedjn. Uh, yeah, it was pretty good, uh, talking, bringing the, the licenses for this architectory. And yeah, that's all. Thank you very much. Thank you, Bruno. Bruno will be next to the theater too if you guys have any questions.